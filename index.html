<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mboa Skills</title>

  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    /* === GLOBAL STYLES ================================= */
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f0f2f5}
    header{position:fixed;top:0;left:0;right:0;display:flex;justify-content:space-around;align-items:center;padding:1rem;background:#fff;border-bottom:1px solid #ddd;z-index:9999}
    header i{font-size:1.4rem;color:#888;cursor:pointer}
    header i.selected{color:#1877f2}
    .tabcontent{display:none;padding:6rem 1rem 1rem;max-width:600px;margin:auto}
    .tabcontent.active{display:block}
    input,textarea,button,select{display:block;width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:6px;font-size:14px;box-sizing:border-box}
    button{background:#1877f2;color:#fff;font-weight:bold;border:none;border-radius:6px;cursor:pointer}
    button:hover{background:#145ec1}
    /* === POST CARD ===================================== */
    .post{background:#fff;border-radius:10px;box-shadow:0 0 5px rgba(0,0,0,.1);padding:1rem;margin-bottom:1rem}
    .post-header{display:flex;align-items:center}
    .post-header img{width:40px;height:40px;border-radius:50%;margin-right:10px;object-fit:cover;cursor:pointer}
    .post-header span.username{font-weight:bold;cursor:pointer;color:#1877f2;}
    .post-content{margin-top:10px}
    .post video,.post .text-bg{width:100%;border-radius:10px;margin-top:10px}
    .text-bg{display:inline-block;padding:.5rem 1rem;font-weight:bold;color:#fff;text-align:center;white-space:pre-wrap;max-width:90%}
    .post-actions{margin-top:10px;display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .post-actions i{cursor:pointer;font-size:1.2rem}
    .like.liked{color:#1877f2}
    .boost-btn{background:#ffa500;color:#fff;padding:5px 10px;font-weight:bold;border-radius:6px;border:none;cursor:pointer}
    .comments-section{margin-top:10px;border-top:1px solid #ccc;padding-top:10px;max-height:150px;overflow-y:auto}
    .comment{background:#eee;padding:5px 10px;border-radius:8px;margin-bottom:6px;font-size:14px}
    .comment strong{color:#1877f2}
    .comment-input{display:flex;gap:10px;margin-top:10px}
    .comment-input input{flex:1;padding:8px;border-radius:8px;border:1px solid #ccc;font-size:14px}
    .comment-input button{padding:8px 16px;background:#1877f2;color:#fff;border:none;border-radius:8px;cursor:pointer}
    #boostStatus{font-weight:bold;color:#1877f2;margin-bottom:10px}
    #totalViewsSection p{font-weight:bold}
  </style>
</head>
<body>

  <!-- ================= HEADER / NAV ================== -->
  <header>
    <i class="fas fa-home tablinks selected" onclick="openTab(event,'home')"></i>
    <i class="fas fa-coins tablinks" onclick="openTab(event,'totalViewsSection')"></i>
    <i class="fas fa-video tablinks" onclick="openTab(event,'videoFeed')"></i>
    <i class="fas fa-plus tablinks" onclick="openTab(event,'post')"></i>
    <i class="fas fa-search tablinks" onclick="openTab(event,'search')"></i>
    <i class="fas fa-user tablinks" onclick="openTab(event,'account')"></i>
  </header>

  <!-- ================= TAB PAGES ====================== -->
  <section id="home" class="tabcontent active">
    <div class="post-header">
      <img id="homeProfilePhoto" src="https://via.placeholder.com/40" onclick="openTab(event,'feedme')"/>
      <p id="authStatus"></p>
    </div>
    <div id="feed"></div>
  </section>

  <section id="post" class="tabcontent">
    <h3>Cr√©er une publication</h3>
    <textarea id="postText" placeholder="Exprimez-vous..."></textarea>
    <input type="color" id="bgColor" value="#1877f2" />
    <hr/>
    <input type="text" id="videoTitle" placeholder="Titre de la vid√©o" />
    <input type="file" id="videoFile" accept="video/*" />
    <button onclick="publishPost()">Publier</button>
    <p id="status"></p>
  </section>

  <section id="videoFeed" class="tabcontent">
    <h3>Publications avec vid√©os</h3>
    <div id="videoFeedContent"></div>
  </section>

  <section id="totalViewsSection" class="tabcontent">
    <h3>Total des vues (7 derniers jours)</h3>
    <p id="totalViewsCount">Chargement...</p>
    <p id="currentBalance">Solde actuel: 0 FCFA</p>
    <input type="number" id="withdrawAmount"
           placeholder="Montant √† retirer (min 50 FCFA)" min="50" />
    <button onclick="withdrawBalance()">Retirer</button>
    <p id="withdrawStatus"></p>
  </section>

  <section id="search" class="tabcontent">
    <h3>Rechercher un utilisateur</h3>
    <input type="text" id="searchUserInput"
           placeholder="Nom ou e-mail de l'utilisateur" />
    <button onclick="searchUser()">Rechercher</button>
    <div id="searchResults"></div>
  </section>

  <section id="account" class="tabcontent">
    <h3>Connexion</h3>
    <button onclick="signInWithGoogle()">
      <i class="fab fa-google"></i> Google
    </button>
    <hr/>
    <button onclick="signOutUser()">Se d√©connecter</button>
  </section>

  <section id="feedme" class="tabcontent">
    <h3>Mes publications</h3>
    <div class="post-header">
      <img id="feedmeProfilePhoto" src="https://via.placeholder.com/40" />
      <label for="profilePhotoInput" title="Changer la photo">
        <i class="fas fa-plus" style="cursor:pointer"></i>
      </label>
      <input type="file" id="profilePhotoInput" accept="image/*" style="display:none" />
    </div>
    <div id="myFeed"></div>
  </section>

  <section id="video" class="tabcontent">
    <h3>Booster une publication</h3>
    <div id="boostPanel" style="display:none;margin-bottom:10px">
      <span id="boostStatus" style="font-weight:bold"></span>
      <input type="number" id="boostViews" placeholder="Nombre de vues √† acheter" min="1" />
      <button onclick="boostPost()">Booster</button>
    </div>
    <div id="videoFeedContentBoost"></div>
  </section>

  <!-- ================= SCRIPTS ======================== -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js';
    import {
      getAuth,onAuthStateChanged,signInWithPopup,signOut,
      GoogleAuthProvider,updateProfile
    } from 'https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js';
    import {
      getFirestore,collection,addDoc,onSnapshot,query,orderBy,where,doc,
      getDocs,getDoc,setDoc,updateDoc,increment,serverTimestamp,deleteDoc
    } from 'https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js';
    import {
      getStorage,ref,uploadBytesResumable,getDownloadURL
    } from 'https://www.gstatic.com/firebasejs/11.9.1/firebase-storage.js';

    // --- CONFIGURATION ---
    const firebaseConfig = {
      apiKey: "AIzaSyClSjd2LrIQpaJoVWO32vFRx7I9cvmDgBo",
      authDomain: "mboa-ec602.firebaseapp.com",
      projectId: "mboa-ec602",
      storageBucket: "mboa-ec602.appspot.com",
      messagingSenderId: "498505132403",
      appId: "1:498505132403:web:eb46547745f8d1a77b3d06"
    };

    const app      = initializeApp(firebaseConfig);
    const auth     = getAuth(app);
    const provider = new GoogleAuthProvider();
    const db       = getFirestore(app);
    const stg      = getStorage(app);

    // --- STATE GLOBAL ---
    let currentUser = null;
    let likedPosts  = new Set();
    let boostId     = '';

    // --- UTILS ---
    const qs  = id => document.getElementById(id);
    const fmt = n  => n >= 1e6 ? (n/1e6).toFixed(1) + 'M'
                     : n >= 1e3 ? (n/1e3).toFixed(1) + 'k'
                     : n;

    // --- NAVIGATION ONGLET ---
    window.openTab = (evt, tabId) => {
      [...document.getElementsByClassName('tabcontent')].forEach(t => {
        t.classList.toggle('active', t.id === tabId);
      });
      [...document.getElementsByClassName('tablinks')].forEach(l => {
        l.classList.toggle('selected', l === evt.currentTarget);
      });
      history.pushState({ tab: tabId }, '', `#${tabId}`);
    };
    window.onpopstate = e => {
      const tab = e.state?.tab || 'home';
      const icon = document.querySelector(`[onclick*="'${tab}'"]`) || document.querySelector('.tablinks');
      if (icon) window.openTab({ currentTarget: icon }, tab);
    };

    // --- AUTHENTIFICATION ---
    window.signInWithGoogle = () => signInWithPopup(auth, provider).catch(err => alert(err.message));
    window.signOutUser = () => signOut(auth);

    onAuthStateChanged(auth, async user => {
      currentUser = user;
      const pp = user?.photoURL || 'https://via.placeholder.com/40';
      qs('homeProfilePhoto').src   = pp;
      qs('feedmeProfilePhoto').src = pp;
      qs('authStatus').textContent = user ? ` ${user.displayName || user.email}` : '';

      if (user) {
        await loadLikedPosts();
        renderFeed();
        renderMyFeed();
        renderVideoFeed();
        renderBoostFeed();
        await loadTotalViewsAndBalance();
      } else {
        likedPosts.clear();
        ['feed','myFeed','videoFeedContent','videoFeedContentBoost'].forEach(id => qs(id).innerHTML = '');
        qs('totalViewsCount').textContent = '';
        qs('currentBalance').textContent  = 'Solde actuel: 0 FCFA';
      }
    });

    // --- UPLOAD PHOTO PROFIL ---
    qs('profilePhotoInput').addEventListener('change', e => {
      const file = e.target.files[0];
      if (!file || !currentUser) return alert('Connectez-vous d\'abord');
      const r = ref(stg, `profile_photos/${currentUser.uid}_${Date.now()}`);
      uploadBytesResumable(r, file).on(
        'state_changed',
        null,
        err => alert(err.message),
        async snap => {
          const url = await getDownloadURL(snap.ref);
          await updateProfile(currentUser, { photoURL: url });
          location.reload();
        });
    });

    // --- PUBLICATION POST ---
    window.publishPost = async () => {
      if (!currentUser) return alert('Connectez-vous');
      const text     = qs('postText').value.trim();
      const bg       = qs('bgColor').value;
      const vidFile  = qs('videoFile').files[0];
      const vidTitle = qs('videoTitle').value.trim();
      if (!text && !vidFile) return alert('Ajoutez un texte ou une vid√©o');

      qs('status').textContent = 'Publication‚Ä¶';

      const data = {
        userEmail : currentUser.email,
        userId    : currentUser.uid,
        userName  : currentUser.displayName || currentUser.email,
        userPhoto : currentUser.photoURL || 'https://via.placeholder.com/40',
        text      : text,
        bgColor   : bg,
        videoUrl  : null,
        videoTitle: vidTitle,
        views     : 0,
        likes     : 0,
        createdAt : serverTimestamp(),
        boosted   : 0
      };

      const resetForm = () => {
        ['postText','videoTitle'].forEach(id => qs(id).value = '');
        qs('videoFile').value = '';
        qs('status').textContent = 'Ok';
      };

      if (vidFile) {
        const r = ref(stg, `videos/${Date.now()}_${vidFile.name}`);
        uploadBytesResumable(r, vidFile).on(
          'state_changed',
          snap => qs('status').textContent = `${Math.floor(snap.bytesTransferred/snap.totalBytes*100)}%`,
          err => alert(err.message),
          async s => {
            data.videoUrl = await getDownloadURL(s.ref);
            await addDoc(collection(db,'posts'), data);
            resetForm();
          });
      } else {
        await addDoc(collection(db,'posts'), data);
        resetForm();
      }
    };

    // --- RENDER FEEDS ---
    function renderFeed() {
      const cont = qs('feed');
      cont.textContent = 'Chargement‚Ä¶';

      const postsRef = collection(db, 'posts');

      const qPosts = query(
        postsRef,
        orderBy('boosted', 'desc'),
        orderBy('createdAt', 'desc')
      );

      onSnapshot(qPosts, snap => {
        cont.innerHTML = '';
        snap.forEach(d => cont.appendChild(card(d.id, d.data(), false)));
      });
    }

    function renderMyFeed() {
      if (!currentUser) return;
      const c = qs('myFeed');
      c.textContent = 'Chargement‚Ä¶';
      onSnapshot(query(collection(db,'posts'),
               where('userId','==',currentUser.uid),
               orderBy('createdAt','desc')), snap => {
        c.innerHTML = '';
        snap.forEach(d => c.appendChild(card(d.id, d.data(), true)));
      });
    }

    function renderVideoFeed() {
      const c = qs('videoFeedContent');
      c.textContent = 'Chargement‚Ä¶';
      onSnapshot(query(collection(db,'posts'),
               where('videoUrl','!=',null),
               orderBy('createdAt','desc')), snap => {
        c.innerHTML = '';
        snap.forEach(d => c.appendChild(card(d.id, d.data(), false)));
      });
    }

    function renderBoostFeed() {
      if (!currentUser) return;
      const c = qs('videoFeedContentBoost');
      c.textContent = 'Chargement‚Ä¶';
      onSnapshot(query(collection(db,'posts'),
               where('userId','==',currentUser.uid),
               where('videoUrl','!=',null),
               orderBy('createdAt','desc')), snap => {
        c.innerHTML = '';
        snap.forEach(d => {
          const el = card(d.id, d.data(), true);
          c.appendChild(el);
        });
      });
    }

    // --- CREATION CARTE POST ---
    function card(id, d, isMine) {
      const wrap = document.createElement('div');
      wrap.className = 'post';
      wrap.innerHTML = `
        <div class="post-header">
          <img src="${d.userPhoto}" alt="pp" />
          <span class="username" data-uid="${d.userId}">${d.userName || d.userEmail}</span>
          ${d.boosted > 0 ? '<span style="margin-left:auto;color:#ffa500;font-size:12px;font-weight:bold">Sponsoris√©</span>' : ''}
        </div>`;

      const cont = document.createElement('div');
      cont.className = 'post-content';

      if (d.videoUrl) {
        cont.innerHTML = `
          <video src="${d.videoUrl}" controls></video>
          ${d.videoTitle ? `<div style="font-weight:bold">${d.videoTitle}</div>` : ''}`;
      } else if (d.text) {
        cont.innerHTML = `<div class="text-bg" style="background:${d.bgColor}">${d.text}</div>`;
      }

      wrap.appendChild(cont);

      // Post actions: Likes, Views, Comments, Boost
      const act = document.createElement('div');
      act.className = 'post-actions';

      // Like button and count
      const like = document.createElement('i');
      like.className = 'fa-regular fa-thumbs-up like';
      if (likedPosts.has(id)) like.classList.add('liked');
      const lCnt = document.createElement('span');
      lCnt.textContent = fmt(d.likes || 0);
      like.onclick = () => toggleLike(id, like, lCnt);
      act.append(like, lCnt);

      // Views count
      const vCnt = document.createElement('span');
      vCnt.textContent = `üëÅÔ∏è ${fmt(d.views || 0)}`;
      act.appendChild(vCnt);

  // Comments icon and count
      const comI = document.createElement('i');
      comI.className = 'fa-regular fa-comment';
      const comCnt = document.createElement('span');
      comCnt.textContent = '...'; // On chargera le nombre r√©el async

      act.append(comI, comCnt);

      // Booster bouton si c'est ton post
      if (isMine) {
        const boostBtn = document.createElement('button');
        boostBtn.className = 'boost-btn';
        boostBtn.textContent = 'Booster';
        boostBtn.onclick = () => selectBoostPost(id, d.text || d.videoTitle || 'Sans titre');
        act.appendChild(boostBtn);
      }

      wrap.appendChild(act);

      // Section commentaires
      const comSection = document.createElement('div');
      comSection.className = 'comments-section';
      comSection.style.display = 'none';

      const comList = document.createElement('div');
      comSection.appendChild(comList);

      // Input commentaire
      if (currentUser) {
        const comInputDiv = document.createElement('div');
        comInputDiv.className = 'comment-input';
        const comInput = document.createElement('input');
        comInput.type = 'text';
        comInput.placeholder = 'Ajouter un commentaire...';
        const comBtn = document.createElement('button');
        comBtn.textContent = 'Envoyer';
        comBtn.onclick = () => {
          const txt = comInput.value.trim();
          if (!txt) return alert('Le commentaire est vide');
          addComment(id, txt);
          comInput.value = '';
        };
        comInputDiv.append(comInput, comBtn);
        comSection.appendChild(comInputDiv);
      }

      wrap.appendChild(comSection);

      // Affichage / Masquage commentaires au clic sur ic√¥ne commentaire
      comI.onclick = () => {
        if (comSection.style.display === 'none') {
          comSection.style.display = 'block';
          loadComments(id, comList, comCnt);
        } else {
          comSection.style.display = 'none';
        }
      };

      // Clic sur nom utilisateur ouvre feedme de cet utilisateur
      wrap.querySelector('.username').onclick = e => {
        const uid = e.target.dataset.uid;
        if (!uid) return;
        openUserFeed(uid);
      };

      return wrap;
    }

    // --- GESTION LIKE ---
    async function toggleLike(postId, iconEl, countEl) {
      if (!currentUser) return alert('Connectez-vous pour liker');
      const postRef = doc(db, 'posts', postId);
      if (likedPosts.has(postId)) {
        likedPosts.delete(postId);
        iconEl.classList.remove('liked');
        await updateDoc(postRef, { likes: increment(-1) });
      } else {
        likedPosts.add(postId);
        iconEl.classList.add('liked');
        await updateDoc(postRef, { likes: increment(1) });
      }
      // Mise √† jour affichage compteur
      const docSnap = await getDoc(postRef);
      countEl.textContent = fmt(docSnap.data().likes || 0);
    }

    async function loadLikedPosts() {
      if (!currentUser) return;
      likedPosts.clear();
      // On r√©cup√®re les posts lik√©s par cet utilisateur
      // Option 1: stocker les likes par utilisateur dans Firestore (√† impl√©menter selon DB)
      // Ici on simule en recherchant si user a lik√© (supposons pas de data suppl√©mentaire)
      // √Ä am√©liorer selon ta base
    }

    // --- GESTION COMMENTAIRES ---
    async function loadComments(postId, container, countEl) {
      const q = query(collection(db, 'posts', postId, 'comments'), orderBy('createdAt'));
      const snap = await getDocs(q);
      container.innerHTML = '';
      countEl.textContent = snap.size;
      snap.forEach(d => {
        const c = d.data();
        const div = document.createElement('div');
        div.className = 'comment';
        div.innerHTML = `<strong>${c.userName || 'Anonyme'}</strong> : ${c.text}`;
        container.appendChild(div);
      });
    }

    async function addComment(postId, text) {
      if (!currentUser) return alert('Connectez-vous pour commenter');
      const comment = {
        userId: currentUser.uid,
        userName: currentUser.displayName || currentUser.email,
        text,
        createdAt: serverTimestamp()
      };
      await addDoc(collection(db, 'posts', postId, 'comments'), comment);
      renderFeed(); // rafra√Æchir si besoin
      renderMyFeed();
      renderVideoFeed();
    }

    // --- BOOST ---
    function selectBoostPost(postId, title) {
      boostId = postId;
      qs('boostStatus').textContent = `1 publication s√©lectionn√©e : ${title}`;
      qs('boostPanel').style.display = 'block';
      openTab({currentTarget: document.querySelector('.tablinks[onclick*="video"]')}, 'video');
    }

    async function boostPost() {
      if (!currentUser) return alert('Connectez-vous');
      if (!boostId) return alert('Aucune publication s√©lectionn√©e');
      let viewsToAdd = parseInt(qs('boostViews').value);
      if (!viewsToAdd || viewsToAdd < 1) return alert('Nombre de vues invalide');

      const postRef = doc(db, 'posts', boostId);
      await updateDoc(postRef, { boosted: increment(viewsToAdd) });

      qs('boostStatus').textContent = 'Boost effectu√© !';
      qs('boostViews').value = '';
      boostId = '';
      renderBoostFeed();
      renderVideoFeed();
      renderFeed();
    }

    // --- FEED UTILISATEUR PAR UID ---
    async function openUserFeed(uid) {
      const tab = qs('feedme');
      tab.classList.add('active');
      [...document.getElementsByClassName('tabcontent')].forEach(t => {
        if (t !== tab) t.classList.remove('active');
      });
      [...document.getElementsByClassName('tablinks')].forEach(l => l.classList.remove('selected'));
      const homeIcon = document.querySelector('.tablinks[onclick*="feedme"]');
      if (homeIcon) homeIcon.classList.add('selected');

      const feedContainer = qs('myFeed');
      feedContainer.innerHTML = 'Chargement...';

      // R√©cup√©rer les posts de l'utilisateur cible
      const q = query(collection(db, 'posts'), where('userId', '==', uid), orderBy('createdAt', 'desc'));
      const snap = await getDocs(q);
      feedContainer.innerHTML = '';
      snap.forEach(d => feedContainer.appendChild(card(d.id, d.data(), uid === currentUser?.uid)));

      // Mettre √† jour photo profil feedme
      if (snap.size > 0) {
        const p = snap.docs[0].data();
        qs('feedmeProfilePhoto').src = p.userPhoto || 'https://via.placeholder.com/40';
      } else {
        qs('feedmeProfilePhoto').src = 'https://via.placeholder.com/40';
      }
    }

    // --- RECHERCHE UTILISATEUR ---
    window.searchUser = async () => {
      const qstr = qs('searchUserInput').value.trim().toLowerCase();
      if (!qstr) return alert('Entrez un nom ou e-mail');

      const usersRef = collection(db, 'users');
      // Suppose une collection users √† cr√©er qui contient {uid, name, email, photoURL}
      // Sinon chercher dans posts et extraire user distincts (moins efficace)
      // Pour l‚Äôexemple, on cherche dans posts et on fait unique :
      const postsSnap = await getDocs(collection(db, 'posts'));
      const usersMap = new Map();

      postsSnap.forEach(doc => {
        const d = doc.data();
        const key = d.userId;
        if (!usersMap.has(key) && (d.userName?.toLowerCase().includes(qstr) || d.userEmail?.toLowerCase().includes(qstr))) {
          usersMap.set(key, {uid: d.userId, name: d.userName, email: d.userEmail, photo: d.userPhoto});
        }
      });

      const resDiv = qs('searchResults');
      resDiv.innerHTML = '';
      if (usersMap.size === 0) {
        resDiv.textContent = 'Aucun utilisateur trouv√©';
        return;
      }
      usersMap.forEach(u => {
        const div = document.createElement('div');
        div.style.cursor = 'pointer';
        div.style.display = 'flex';
        div.style.alignItems = 'center';
        div.style.marginBottom = '8px';

        const img = document.createElement('img');
        img.src = u.photo || 'https://via.placeholder.com/40';
        img.style.width = '40px';
        img.style.height = '40px';
        img.style.borderRadius = '50%';
        img.style.marginRight = '10px';

        const span = document.createElement('span');
        span.textContent = u.name || u.email;
        span.style.color = '#1877f2';
        span.style.fontWeight = 'bold';

        div.append(img, span);
        div.onclick = () => openUserFeed(u.uid);
        resDiv.appendChild(div);
      });
    };

    // --- VUES ET SOLDE ---
    async function loadTotalViewsAndBalance() {
      if (!currentUser) return;
      const uid = currentUser.uid;

      // R√©cup√©rer total vues dans les 7 derniers jours
      const postsRef = collection(db, 'posts');
      const q = query(postsRef, where('userId', '==', uid));
      const snap = await getDocs(q);
      let totalViews = 0;
      snap.forEach(doc => {
        const d = doc.data();
        totalViews += d.views || 0;
      });

      const totalViewsCount = qs('totalViewsCount');
      totalViewsCount.textContent = `Total vues : ${totalViews}`;

      // Calcul solde : 1000 vues = 50 FCFA
      const balance = Math.floor((totalViews / 1000) * 50);
      qs('currentBalance').textContent = `Solde actuel : ${balance} FCFA`;
      window.currentBalance = balance; // global pour retrait
    }

    window.withdrawBalance = () => {
      const amount = parseInt(qs('withdrawAmount').value);
      if (!amount || amount < 50) return alert('Montant minimum 50 FCFA');
      if (amount > window.currentBalance) return alert('Montant sup√©rieur au solde');
      alert(`Demande de retrait de ${amount} FCFA envoy√©e !`);
      // TODO: Enregistrer la demande ou d√©duire le solde c√¥t√© serveur
      qs('withdrawAmount').value = '';
    };

  </script>
</body>
</html>